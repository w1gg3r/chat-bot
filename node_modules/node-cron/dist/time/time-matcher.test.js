"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const chai_1 = require("chai");
const time_matcher_1 = require("./time-matcher");
describe('TimeMatcher', function () {
    describe('wildcard', function () {
        it('should accept wildcard for second', function () {
            const matcher = new time_matcher_1.TimeMatcher('* * * * * *');
            chai_1.assert.isTrue(matcher.match(new Date()));
        });
        it('should accept wildcard for minute', function () {
            const matcher = new time_matcher_1.TimeMatcher('0 * * * * *');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 10, 20, 0)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 0, 1, 10, 20, 1)));
        });
        it('should accept wildcard for hour', function () {
            const matcher = new time_matcher_1.TimeMatcher('0 0 * * * *');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 10, 0, 0)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 0, 1, 10, 1, 0)));
        });
        it('should accept wildcard for day', function () {
            const matcher = new time_matcher_1.TimeMatcher('0 0 0 * * *');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 0, 0, 0)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 0, 1, 1, 0, 0)));
        });
        it('should accept wildcard for month', function () {
            const matcher = new time_matcher_1.TimeMatcher('0 0 0 1 * *');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 0, 0, 0)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 0, 2, 0, 0, 0)));
        });
        it('should accept wildcard for week day', function () {
            const matcher = new time_matcher_1.TimeMatcher('0 0 0 1 4 *');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 3, 1, 0, 0, 0)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 3, 2, 0, 0, 0)));
        });
    });
    describe('single value', function () {
        it('should accept single value for second', function () {
            const matcher = new time_matcher_1.TimeMatcher('5 * * * * *');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 0, 0, 5)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 0, 1, 0, 0, 6)));
        });
        it('should accept single value for minute', function () {
            const matcher = new time_matcher_1.TimeMatcher('0 5 * * * *');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 0, 5, 0)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 0, 1, 0, 6, 0)));
        });
        it('should accept single value for hour', function () {
            const matcher = new time_matcher_1.TimeMatcher('0 0 5 * * *');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 5, 0, 0)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 0, 1, 6, 0, 0)));
        });
        it('should accept single value for day', function () {
            const matcher = new time_matcher_1.TimeMatcher('0 0 0 5 * *');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 5, 0, 0, 0)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 0, 6, 0, 0, 0)));
        });
        it('should accept single value for month', function () {
            const matcher = new time_matcher_1.TimeMatcher('0 0 0 1 5 *');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 4, 1, 0, 0, 0)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 5, 1, 0, 0, 0)));
        });
        it('should accept single value for week day', function () {
            const matcher = new time_matcher_1.TimeMatcher('0 0 0 * * monday');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 4, 7, 0, 0, 0)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 4, 8, 0, 0, 0)));
        });
    });
    describe('multiple values', function () {
        it('should accept multiple values for second', function () {
            const matcher = new time_matcher_1.TimeMatcher('5,6 * * * * *');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 0, 0, 5)));
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 0, 0, 6)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 0, 1, 0, 0, 7)));
        });
        it('should accept multiple values for minute', function () {
            const matcher = new time_matcher_1.TimeMatcher('0 5,6 * * * *');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 0, 5, 0)));
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 0, 6, 0)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 0, 1, 0, 7, 0)));
        });
        it('should accept multiple values for hour', function () {
            const matcher = new time_matcher_1.TimeMatcher('0 0 5,6 * * *');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 5, 0, 0)));
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 6, 0, 0)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 0, 1, 7, 0, 0)));
        });
        it('should accept multiple values for day', function () {
            const matcher = new time_matcher_1.TimeMatcher('0 0 0 5,6 * *');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 5, 0, 0, 0)));
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 6, 0, 0, 0)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 0, 7, 0, 0, 0)));
        });
        it('should accept multiple values for month', function () {
            const matcher = new time_matcher_1.TimeMatcher('0 0 0 1 may,june *');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 4, 1, 0, 0, 0)));
            chai_1.assert.isTrue(matcher.match(new Date(2018, 5, 1, 0, 0, 0)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 6, 1, 0, 0, 0)));
        });
        it('should accept multiple values for week day', function () {
            const matcher = new time_matcher_1.TimeMatcher('0 0 0 * * monday,tue');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 4, 7, 0, 0, 0)));
            chai_1.assert.isTrue(matcher.match(new Date(2018, 4, 8, 0, 0, 0)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 4, 9, 0, 0, 0)));
        });
    });
    describe('range', function () {
        it('should accept range for second', function () {
            const matcher = new time_matcher_1.TimeMatcher('5-7 * * * * *');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 0, 0, 5)));
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 0, 0, 6)));
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 0, 0, 7)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 0, 1, 0, 0, 8)));
        });
        it('should accept range for minute', function () {
            const matcher = new time_matcher_1.TimeMatcher('0 5-7 * * * *');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 0, 5, 0)));
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 0, 6, 0)));
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 0, 7, 0)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 0, 1, 0, 8, 0)));
        });
        it('should accept range for hour', function () {
            const matcher = new time_matcher_1.TimeMatcher('0 0 5-7 * * *');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 5, 0, 0)));
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 6, 0, 0)));
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 7, 0, 0)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 0, 1, 8, 0, 0)));
        });
        it('should accept range for day', function () {
            const matcher = new time_matcher_1.TimeMatcher('0 0 0 5-7 * *');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 5, 0, 0, 0)));
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 6, 0, 0, 0)));
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 7, 0, 0, 0)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 0, 8, 0, 0, 0)));
        });
        it('should accept range for month', function () {
            const matcher = new time_matcher_1.TimeMatcher('0 0 0 1 may-july *');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 4, 1, 0, 0, 0)));
            chai_1.assert.isTrue(matcher.match(new Date(2018, 5, 1, 0, 0, 0)));
            chai_1.assert.isTrue(matcher.match(new Date(2018, 6, 1, 0, 0, 0)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 7, 1, 0, 0, 0)));
        });
        it('should accept range for week day', function () {
            const matcher = new time_matcher_1.TimeMatcher('0 0 0 * * monday-wed');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 4, 7, 0, 0, 0)));
            chai_1.assert.isTrue(matcher.match(new Date(2018, 4, 8, 0, 0, 0)));
            chai_1.assert.isTrue(matcher.match(new Date(2018, 4, 9, 0, 0, 0)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 4, 10, 0, 0, 0)));
        });
    });
    describe('step values', function () {
        it('should accept step values for second', function () {
            const matcher = new time_matcher_1.TimeMatcher('*/2 * * * * *');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 0, 0, 2)));
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 0, 0, 6)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 0, 1, 0, 0, 7)));
        });
        it('should accept step values for minute', function () {
            const matcher = new time_matcher_1.TimeMatcher('0 */2 * * * *');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 0, 2, 0)));
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 0, 6, 0)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 0, 1, 0, 7, 0)));
        });
        it('should accept step values for hour', function () {
            const matcher = new time_matcher_1.TimeMatcher('0 0 */2 * * *');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 2, 0, 0)));
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 6, 0, 0)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 0, 1, 7, 0, 0)));
        });
        it('should accept step values for day', function () {
            const matcher = new time_matcher_1.TimeMatcher('0 0 0 */2 * *');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 0, 0, 0)));
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 3, 0, 0, 0)));
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 5, 0, 0, 0)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 0, 6, 0, 0, 0)));
        });
        it('should accept step values for month', function () {
            const matcher = new time_matcher_1.TimeMatcher('0 0 0 1 */2 *');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 0, 1, 0, 0, 0)));
            chai_1.assert.isTrue(matcher.match(new Date(2018, 2, 1, 0, 0, 0)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 5, 1, 0, 0, 0)));
        });
        it('should accept step values for week day', function () {
            const matcher = new time_matcher_1.TimeMatcher('0 0 0 * * */2');
            chai_1.assert.isTrue(matcher.match(new Date(2018, 4, 6, 0, 0, 0)));
            chai_1.assert.isTrue(matcher.match(new Date(2018, 4, 8, 0, 0, 0)));
            chai_1.assert.isFalse(matcher.match(new Date(2018, 4, 9, 0, 0, 0)));
        });
    });
    describe('timezone', function () {
        it('should match with timezone America/Sao_Paulo', function () {
            const matcher = new time_matcher_1.TimeMatcher('0 0 0 * * *', 'America/Sao_Paulo');
            const utcTime = new Date('Thu Oct 11 2018 03:00:00Z');
            chai_1.assert.isTrue(matcher.match(utcTime));
        });
        it('should match with timezone Europe/Rome', function () {
            const matcher = new time_matcher_1.TimeMatcher('0 0 0 * * *', 'Europe/Rome');
            const utcTime = new Date('Thu Oct 11 2018 22:00:00Z');
            chai_1.assert.isTrue(matcher.match(utcTime));
        });
    });
});
//# sourceMappingURL=time-matcher.test.js.map